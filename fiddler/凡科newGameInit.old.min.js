!function(e){var a={},i=g_config.$$isOpenGameVer2,o=!g_config.$$fromMinapp_Jfly&&(g_config.$$theGray.openGameInit_old||g_config.$$theGray.openGameInit_new||i),n=_manage&&parent.game&&parent.game.$$isNotRealAct&&0==parent.game._setting.modId;a.newGameInitAjax=function(){for(var e=g_config.hdGameResConfig,a={editQrcode:!0,_source:1,resPathKey:JSON.stringify(["css_faicaptcha_1_6","js_faicaptcha_1_6","js_wxMsgFunc","js_partnerUse","js_innerPartnerUse","js_checkUnPubJoinLimit","js_activateSound"]),resConfigKey:JSON.stringify(e.singleRes),resGroupObjKey:JSON.stringify(e.resGroup)},i=window.location.href.split("?")[1].split("#")[0].split("&"),o=0;o<i.length;o++){var n=i[o].split("=");a[n[0]]=n[1]}return a.aid=a.aid||g_config.aid,a.id=a.id||g_config.gameId,$ajaxRequest.request({url:g_config.apiAjaxUrl+"gameInit/newGameInit",data:a}).then((function(e){return e}))},a.filterGameData=function(e){g_config.$$fromMinapp_Jfly&&(e.openId=g_config.jfly_UnionId);var i=a.getCommInfo(e);return{success:!0,game:e,commInfo:i,componentInfo:a.getComponentInfo(e,i),aloneInfo:a.getAloneComponentInfo(e,i)}},a.getCommInfo=function(e){return{gameInfo:{manage:o?e._manage:_manage,preview:g_config._preview,isOem:e.isOem,isYKY:e.isYKY,isModel:e.isModel,resRoot:o?e._resRoot:_resRoot,aid:e.aid,uid:e.uid,jsHostId:e.jsHostId,ykyRelationId:e.ykyRelationId,gameId:e.gameId,openId:e.openId,storeId:e.storeId,areaId:e.areaId,isAOpenId:e.isAOpenId,tryPlay:e.tryPlay,playerId:e.playerId,gameStyle:e.style,gameType:e.gameType,drawType:e.drawType,partnerType:e.partnerType,status:e.status,createTime:e.createTime,isPublish:o?e.isPublish:isPublish,isOldFaiImgGame:e.isOldFaiImgGame,hasReport:e.hasReport,thisProf:e.thisProf,flagB:e.flagB,isAdverQRCode:e.isAdverQRCode,theRunningAdClass:e.theRunningAdClass,theSpecialClass:e.theSpecialClass,menuName:e.menuName},setting:e.setting,verInfo:e.verInfo,gameTypeInfo:{isMinAppGame:e.isMinAppGame,isLiveActive:o?e.isLiveActive:e.$$isLiveActive,isZhuliGame:o?e.zhuliGame:e.isZhuliGame,isNewVoteGame:o?e.isNewVoteGame:e.$$isNewVoteGame,isPaymentGame:o?e.paymentGame:e.isPaymentGame,needNewVersion:o?e.needNewVersion:e.$$needNewVersion},userInfo:{headImg:e.headImg,userName:e.userName},scoreInfo:{scoreType:o?e.scoreType:e.$$scoreType,timeScoreType:o?e.timeScoreType:e.scoreType,scoreUnit:e.scoreUnit,bestRankInfo:e.bestRankInfo},urlInfo:{mHomeHost:e.mHomeHost,qrCodeUrl:e.qrCodeUrl,apiAjaxUrl:e.apiAjaxUrl,ajaxUrl:e.ajaxUrl,fromMinapp_Jfly:o?e.fromMinapp_Jfly:e.$$fromMinapp_Jfly,sendGiftUrl:e.sendGiftUrl,sendVideoVipUrl:e.sendVideoVipUrl,redPacketUrl:e.redPacketUrl,fromCanal:e.fromCanal,fromFav:e.fromFav,qrCodeType:e.qrCodeType,fromFlyerIframe:e.fromFlyerIframe},drawInfo:{drawLimit:e.drawLimit,isLimitDrawTimes:e.isLimitDraw,playTotalLimitShow:e.playTotalLimitShow},awardInfo:{awardNum:e.awardNum,awardList:e.awardList,openComfort:e.openComfort,comfort:e.comfort},awardTypeInfo:o?e.awardTypeInfo:e.$$awardTypeInfo,hostInfo:{ajaxUrl:e.ajaxUrl,apiAjaxUrl:e.apiAjaxUrl,aid:e.aid,jumpType:e.jumpType,hostLink:e.hostLink,jzSiteId:e.jzSiteId,hostInfoId:e.hostInfoId,hostName:e.hostName,isShow:!0},storeInfo:e.storeInfo,areaInfo:e.areaInfo,minAppInfo:{mpAppId:e.mpAppId,trulyMpAppIDforH5Game:e.trulyMpAppIDforH5Game,mpPagePath:e.mpPagePath,fromRealHdportalM:o?e.fromRealHdportalM:_fromRealHdportalM,_minapp_preview:e._minapp_preview,fromCardBag:o?e.fromCardBag:_fromCardBag,_fromHdportalM:o?e.fromHdportalM:_fromHdportalM,previewModId:e.previewModId,isShowHomeBottomBtn:!e.isJXKJ&&["model","active"].indexOf(e._minapp_preview)>-1},wxInfo:{gameAfterWxCard:o?e.gameAfterWxCard:e.afterWxCard,isFansOnly:e.openStrongAttention,isHasAttention:e.ishasAttentiosThisAPP},skillSupportInfo:{showSkillSup:e.showSkillSup,skillSupport:e.skillSupport,oemCloseSkillSupport:e.oemCloseSkillSupport,skillSupportType:e.skillSupportType,supportUrl:e.supportUrl},contactInfo:{contactNoDraw:e.contactNoDraw,isOpenPlayerEditLinkInfo:o?e.isOpenPlayerEditLinkInfo:e.$$isOpenPlayerEditLinkInfo}}},a.getComponentInfo=function(e,a){for(var t=a.gameInfo,r=a.gameTypeInfo,s=["logoImg_path","loadingImg","awardIconImgPath","setting.nourishmentImg"],m=0;m<s.length;m++)if(s[m].indexOf(".")>-1){var p=s[m].split(".");e[p[0]][p[1]]=HdGame.getWebpImgSrc_Gray(e[p[0]][p[1]])}else e[s[m]]=HdGame.getWebpImgSrc_Gray(e[s[m]]);return{logoStyle:{showLogo:e.showLogo,isShow:!r.isMinAppGame&&!r.isLiveActive,path:e.logoImg_path,rw:parseRemToPx("2rem"),rh:parseRemToPx("2rem"),w:parseRemToPx(e.logoImg_w),h:parseRemToPx(e.logoImg_h),t:parseRemToPx(e.logoImg_t),l:parseRemToPx(e.logoImg_l)},preloadInfo:{isShow:!0,loadingStyle:e.loadingStyle,loadingImg:e.loadingImg,_noLoading:e._noLoading,playerToken:e.playerToken},unPublishPageInfo:{caseAcctPublishTips:o?e.caseAcctPublishTips:e.$$caseAcctPublishTips},skillSupInfo:{qrcodeImgPath:HdGame.encodeHtmlAttr(e.qrcodeImgPath),U_PlusImgPath:HdGame.encodeHtmlAttr(e.U_PlusImgPath),isU_PlusAccount:e.isU_PlusAccount},ruleDecideInfo:{openAwardExp:e.openAwardExp,gameInitTipsText:e.gameInitTipsText},activityRuleInfo:{havePoup:g_config.$$isOpenSilkBagGray&&!r.isNewVoteGame&&!r.isMinAppGame&&!r.isLiveActive&&!t.fromMinapp_Jfly&&!g_config.isSpecialPoupInfoBoxGame&&!g_config.isLongPage,isHideRuleImg:g_config.isHideRuleImg||g_config.$$fromMinapp_Jfly,ruleImgEditInfo:{width:n?g_config.awardIconImg_w_def:e.awardIconImg_w,height:n?g_config.awardIconImg_h_def:e.awardIconImg_h,top:n?g_config.awardIconImg_t_def:e.awardIconImg_t,left:n?g_config.awardIconImg_l_def:e.awardIconImg_l,path:e.awardIconImgPath,path_def:e.awardIconImgPath_def},hiddenActiveRule:e.hiddenActiveRule,rulesortstr:e.rulesortstr,startDate:e.startDate,endDate:e.endDate,skiiSupUrll:HdGame.decodeUrl(e.setting.skl),faiscoText:e.faiscoText,isU_PlusAccount:e.isU_PlusAccount,explainInfo:e.explainInfo,getRankUrl:e.getRankUrl+"&start=0&limit=99&playerId="+e.playerId,getAwardUrl:e.getAwardUrl,getRegAwardUrl:e.getRegAwardUrl,awardExplainType:o?e.awardExplainType:e.isSelAwardLine,awardExplain:e.awardExplain,newAwardDescript:o?e.newAwardDescript:e.$$newAwardDescript,drawTotalLimitShow:e.drawTotalLimitShow,drawTimesLimitShow:e.drawTimesLimitShow,menuStyle:e.menuStyle,msJumpType:e.msJumpType,menuName:e.menuName,openAccessKeyOnce:e.openAccessKeyOnce,_flagF:e._flagF||{}},theAuserInfo:{isFirstSet:!1,ajaxUrl:e.ajaxUrl,afterLinkModify:o?e.gameAfterLinkModify:e.afterLinkModify,fromCanal:e.fromCanal,awardLinkMsg:e.awardLinkMsg,isLinkInfoNotPayMinApp:o?e.isLinkInfoNotPayMinApp:e.$$isLinkInfoNotPayMinApp},soundInfo:{isShow:i,pauseCord:"soundPause|"+e.aid+"|"+e.gameId+"|"+e.openId,pos:{left:e.soundIcon_l,top:e.soundIcon_t},soundList:e.soundList,soundListDef:e.soundListDef,soundListMod:[]},sloganInfo:{canshow:!r.isMinAppGame&&!r.isLiveActive&&g_config.haveSlogan,brandExposure:e.brandExposure,brandExposureText:e.brandExposureText},homeBtnInfo:{isShow:!r.isMinAppGame&&!r.isLiveActive&&!HdGame.isLongPageGame(),refreshImgPath:e.refreshImgPath,isHideInformBtn:e.isHideInformBtn,showAwardBtn:e.showAwardBtn,showLunbo:e.newPlayerAwardList.length>3&&!Utils.contains([6],e.gameType)&&g_config.showSlide},complaintInfo:{complaintReasonList:e.complaintReasonList},smartCardInfo:{path:t.resRoot+"/image/smartCard.png",w:parseRemToPx("2.218rem"),h:parseRemToPx("2.432rem"),t:parseRemToPx("3.2rem"),l:parseRemToPx("0.384rem")}}},a.getAloneComponentInfo=function(e,a){var i=a.gameInfo,n=_manage?parent.game:{},t=g_config.fsnShareInfo;return{advertisingInfo:{advertisingDisplayModel:e.advertisingDisplayModel,openAdvertisingLimitDisplay:o?!e.notLimitAdvertisingTime:e.openAdvertisingLimitDisplay,hasForceAdvertising:o?e.forceAdvertising:e.openAdvertisingForceWatch,advertisingTime:e.advertisingTime,advertisingNum:e.advertisingNum},hdLunboInfo:{manage:i.manage,rstyle:i.gameStyle,showSkillSup:a.skillSupportInfo.showSkillSup,headImg:a.userInfo.headImg,rotateAwardWinningInfo:{isShow:!Utils.contains([75],e.style)&&(!!i.manage||e.newPlayerAwardList.length>3&&!Utils.contains([6],e.gameType)&&g_config.showSlide),playerAwardList:e.newPlayerAwardList,gameType:e.gameType,isOpenSlide:Utils.checkBit(e.flag,536870912)}},aGroupInfo:{manageGame:n,apiAjaxUrl:e.apiAjaxUrl,resRoot:i.resRoot,gameId:e.gameId,openId:e.openId,gameType:e.gameType,ajaxUrl:e.ajaxUrl,rstyle:e.style,fromFlyerIframe:e.fromFlyerIframe,joinLimit:e.joinLimit,accessrule:e.accessrule,checkAddGroupOpenData:o?e.checkAddGroupOpenData:e.$$checkAddGroupOpenData,checkAddGroupOpenList:g_config.$$checkAddGroupOpenList,manage:i.manage&&!i.preview,tryPlay:e.tryPlay,isOpenGroup:o?e.isOpenGroup:e.$$isOpenGroup},accessKeyPopupInfo:{isShow:HdGame.isOpenAccessKey(),title:g_config.accesspopuptitle},fsnShareObjInfo:{info:t,isShow:t&&t.rt>-1&&e.openId!=t.fsnOpenId}}},a.initGame=function(){if(o)$gameInit.newGameInitAjax().then((function(e){if(e.success){var i=e.data.game,o=a.filterGameData(i);hg.fire("initGameEnd",i,o)}else HdGame.showMsg(e.msg||"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åŽé‡è¯•")}));else{var e=a.filterGameData(g_config);hg.fire("initGameEnd",g_config,e)}},window.$gameInit={initGame:a.initGame,newGameInitAjax:a.newGameInitAjax,filterGameData:a.filterGameData}}(window);